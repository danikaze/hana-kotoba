# edict

List of commands and scripts to generate all the needed information from the edict files into the game model.

Usually, they are executed in order within their group.

On one side, there's the Japanese dictionary information:

## A. JmDict model

```
npm run edict:seed
```

[seed.ts](./src/seed.ts) will load the given `JMdict_e` file, parse it and seed the [JmDict model](../../libs/jmdict/src/lib/jm-dict-model.ts) via [Prisma](https://www.prisma.io/). Seeding the data for every entry might take some time...

## B. Game Data

This needs to be run in order (at least partially) to work.

The reason why it's divided in multiple points is to ensure estability as each operation might take long time to be completed.

### 1. Find combinable words

Analyze the existing words of the dictionary, filter them by levels, and combine into groups of words that can go together in games.

```
npm run edict:find-words
```

[find-combinable-words.ts](./src/find-combinable-words.ts) will load the given `JMdict_e` file, parse it and find every possible combination of 5 characters that can create game matrices with words to guess.

Note: Even if 99% of the combinations are found in around 1 minute, to make sure nothing is missed it might take up to 2 hours.

### 2. Create game data

Using the output from point 1, create the data used in the games (matrices, etc.).

```
npm run edict:generate-games
```

[generate-game-data.ts](./src/generate-game-data.ts) will load the output generated by the first step and read the list of valid combinations to create data entries to be used in the game per se (such as aligned words game matrices, etc.)

### 3. Populate the database

Using the output from point 2, populate the database so it's usable by the app itself.

```
npm run edict:seed-games
```
